<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>登录</title>
		<script src="../js/mui.min.js"></script>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../css/login.css" />
	</head>

	<body>

		<div class="mui-content" style="background-color: #F5F5F5;">
			<div id="logo-content">
				<div id="logo">
					<img src="../img/dllogo.png" style="height: 100%; width: 100%;" />
				</div>
			</div>

			<div class="login-content">
				<div class="login">

					<div class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
						<div class="mui-scroll">
							<a class="mui-control-item mui-active" href="#message-login">短信登录</a>
						</div>
					</div>

					<div class="mui-slider-group">
						<div id="message-login" class="mui-slider-item mui-control-content mui-active">
							<form class="mui-input-group">
								<div class="mui-input-row">
									<label>手机号</label>
									<input type="number" id="phoneNum" placeholder="请输入手机号">
								</div>
								<div class="mui-input-row">
									<label>验证码</label>
									<input type="number" id='code' placeholder="请输入验证码">
									<button type="button" class="mui-btn-test" id="getCode">获取验证码</button>
								</div>
								<div class="promt"></div>
								<div class="mui-button-row">
									<a href="designer_home.html"><button type="button" class="mui-btn-login" id="login">登录</button></a>
									<!-- <button type="button" class="mui-btn-login" id="login">登录</button> -->
									<a href="forgot_password_identity_verification.html"><span class="mui-forget">忘记密码？</span></a>
								</div>
							</form>
						</div>

						<div id="account-login" class="mui-slider-item mui-control-content ">
							<form class="mui-input-group">
								<div class="mui-input-row">
									<label>手机号</label>
									<input type="number" placeholder="请输入手机号">
								</div>
								<div class="mui-input-row">
									<label>密&nbsp;&nbsp;&nbsp;码</label>
									<input type="number" placeholder="请输入密码">
								</div>
								<div class="mui-button-row">
									<a href="designer_home.html"><button type="button" class="mui-btn-login">登录</button></a>
									<!-- <button type="button" class="mui-btn-login">登录</button> -->
									<a href="forgot_password_identity_verification.html"><span class="mui-forget">忘记密码？</span></a>
								</div>
							</form>
						</div>
					</div>
					<div>
						<a href="register.html"><span style="z-index: 3; position: absolute; top: 105%; left: 39%; color: #6C91FE; font-size: 17px;">免费注册</span></a>
					</div>
					<div class="dsf">
						<span class="dsf-line"></span>
						<span class="dsf-font">第三方账号快速登录</span>
						<span class="dsf-line"></span>
					</div>
					<div>
						<a href="#"><img src="../img/wx.png" style=" width: 13%;  position: absolute;left: 25%; top: 135%;" /></a>
						<a href="#"><img src="../img/QQ.png" style=" width: 13%;  position: absolute;left: 44%; top: 135%;" /></a>
						<a href="#"><img src="../img/wb.png" style=" width: 13%;  position: absolute;right: 25%; top: 135%;" /></a>
					</div>
				</div>

			</div>
		</div>
	</body>
	<script src="./../js/jquery-1.11.0.min.js"></script>
	<script src="../js/util.js"></script>
	<script type="text/javascript" charset="utf-8">
		mui.init();
		//检验手机号
		function isPhoneNum() {
			var phoneNum = $('#phoneNum'),
				code = $('#code')
			var reg = /^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
			if (!reg.test(phoneNum.val())) {
				$('.promt').html('请输入正确的手机号码')
				return false;
			} else if (phoneNum.val() != '18915427612') {
				$('.promt').html('此手机未注册')
			} else {
				$('.promt').html('')
				setTime($('#getCode'))
				//此处为发送验证码的接口
				return true;
			}
		}
		//倒计时
		var countdown = 60;

		function setTime(obj) {
			if (countdown == 0) {
				obj.prop('disabled', false);
				obj.text("重新获取");
				countdown = 60; //60秒过后button上的文字初始化,计时器初始化;
				return;
			} else {
				obj.prop('disabled', true);
				obj.text(countdown + "\"");
				countdown--;
			}
			setTimeout(function() {
				setTime(obj)
			}, 1000) //每1000毫秒执行一次
		}
		$('#getCode').click(function() {
			isPhoneNum()
		})
		// 登录接口请求
			
			mui.ajax('http://39.98.77.177:8080/api/authenticate/merchantOperator', {
				data: {
					username: '18138888888',
					password: 'admin',
					rememberMe:true
				},
				dataType: 'json', //服务器返回json格式数据
				type: 'post', //HTTP请求类型
				timeout: 10000, //超时时间设置为10秒；
				headers: {
					'Content-Type': 'application/json',
					'id_token':'eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxODEzODg4ODg4OCIsImF1dGgiOiIiLCJ1c2VydHlwZSI6IlJPTEVfT1BFUkFUT1IiLCJleHAiOjE1NTA4MDAzMzJ9.8qf2Fuu18-9caLdZF_G6AgOirtjcepKOKWDfR6182NYXfY0xXk4pqTckrxi8LmLrwKmqFgOgK2_F6ufmB54tYw'
				},
				success: function(data) {
					//服务器返回响应，根据响应结果，分析是否登录成功；
					console.log(data)
				},
				error: function(xhr, type, errorThrown) {
					//异常处理；
					console.log(type);
				}
			});
		
		
	</script>

</html>
